extends layout.pug

block title
  title Welcome to Reddit Clone!!!

block content
  h1 Welcome to Reddit Clone!!!
  #user
    if user
      p Welcome back, #{user.username}!
      form(action= "/", method="POST")
        input(type="hidden", name="logout", value="1")
        button(type="submit") logout      
      ul.post-list
        each post in posts
          li.post
            h2
              a(href=post.url)= post.title
            p Submitted by #{post.user.username}
            p Score: #{post.score} Upvotes: #{post.upVotes} Downvotes: #{post.downVotes}
            form(action= "/", method="POST")
              input(type="hidden", name="vote", value="1")
              input(type="hidden", name="postId", value=post.id)
              button(type="submit") upvote this
            form(action= "/", method="POST")
              input(type="hidden", name="vote", value="-1")
              input(type="hidden", name="postId", value=post.id)
              button(type="submit") downvote this
    else
      form(action= "/", method="POST")
        input(type="hidden", name="signup", value="1")
        button(type="submit") Sign Up
      form(action= "/", method="POST")
        input(type="hidden", name="login", value="1")
        button(type="submit") Login 
      ul.post-list
        each post in posts
          li.post
            h2
              a(href=post.url)= post.title
            p Submitted by #{post.user.username}
            p Score: #{post.score} Upvotes: #{post.upVotes} Downvotes: #{post.downVotes}